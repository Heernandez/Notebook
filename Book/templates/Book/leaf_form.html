{% extends "Book/base.html" %}
{% load static %}

{% block title %}New leaf · Note-Book{% endblock %}

{% block toolbar %}{% endblock %}

{% block content %}
  <section class="editor-shell">
    <header class="editor-header">
      <a class="reader-back" href="{% url 'Book:detail' book.pk %}" aria-label="Back">
        <img src="{% static 'back.png' %}" alt="" aria-hidden="true" />
      </a>
      <h1>Create a new leaf</h1>
      <p>Write freely and drop images into the page.</p>
    </header>
    <form method="post" class="editor-form" data-editor-form data-upload-url="{% url 'Book:leaf_image_upload' %}">
      {% csrf_token %}
      {{ form.content_json }}
      <div class="editor-toolbar">
        <button class="editor-icon-btn" type="button" data-image-button>Insert image</button>
        <input type="file" accept="image/*" data-image-input hidden />
        <div class="editor-divider" aria-hidden="true"></div>
        <button class="editor-icon-btn" type="button" data-heading="1">Title</button>
        <button class="editor-icon-btn" type="button" data-heading="2">Subtitle</button>
        <button class="editor-icon-btn" type="button" data-heading="paragraph">Normal</button>
        <label class="editor-color">
          <span>Color</span>
          <input type="color" value="#1f2a37" data-color-input />
        </label>
      </div>
      <div class="editor-canvas" data-editor-canvas>
        <div class="editor-surface" data-editor-surface></div>
        <button class="editor-image-remove" type="button" aria-label="Remove image" data-image-remove>×</button>
      </div>
      <div class="editor-actions">
        <button class="editor-btn" type="submit">Save leaf</button>
        <a class="editor-link" href="{% url 'Book:detail' book.pk %}">Cancel</a>
      </div>
    </form>
  </section>
  <script type="module" src="{% static 'Book/leaf_editor.js' %}"></script>
{% endblock %}
