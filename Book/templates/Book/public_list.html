{% extends "Book/base.html" %}

{% block title %}Explore notebooks Â· Note-Book{% endblock %}

{% block content %}
  <section class="hero">
    <div>
      <h1>Explore public notebooks</h1>
      <p>Ideas, notes, and photos organized by people like you.</p>
    </div>
    <form class="search" method="get">
      <input type="text" name="q" placeholder="Search by topic or keyword" value="{{ request.GET.q }}" />
      <button class="btn btn-secondary" type="submit">Search</button>
    </form>
  </section>

  {% if books %}
    <section class="grid">
      {% for book in books %}
        <article class="card">
          <a href="{% url 'Book:detail' book.pk %}">
            <div class="card-cover">
              {% if book.cover_image %}
                <img src="{{ book.cover_image.url }}" alt="Cover for {{ book.title }}" />
              {% else %}
                <div class="cover-placeholder">No cover</div>
              {% endif %}
            </div>
            <div class="card-body">
              <h3>{{ book.title }}</h3>
              <p>{{ book.description|default:"No description yet"|truncatechars:120 }}</p>
              <span class="meta">By {{ book.owner.first_name }} {{ book.owner.last_name }}</span>
            </div>
          </a>
        </article>
      {% endfor %}
    </section>
  {% else %}
    <div class="empty-state">
      <h3>No public notebooks yet</h3>
      <p>Be the first to share a notebook.</p>
      {% if user.is_authenticated %}
        <a class="btn btn-primary" href="{% url 'Book:create' %}">Create my notebook</a>
      {% endif %}
    </div>
  {% endif %}
{% endblock %}
